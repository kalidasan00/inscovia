// backend/prisma/schema.prisma
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Institute User for Authentication
model InstituteUser {
  id       String   @id @default(cuid())
  email    String   @unique
  password String

  instituteName String
  phone         String
  type          String

  state    String
  district String
  city     String
  location String

  isVerified Boolean  @default(false)
  isActive   Boolean  @default(true)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  centers Center[]

  @@index([email])
}

model Center {
  id   String @id @default(cuid())
  name String
  type String

  state    String
  district String
  city     String
  location String

  rating  Float    @default(0)
  courses String[]

  image   String?
  logo    String?
  gallery String[] @default([])

  description String @db.Text

  website  String?
  whatsapp String?
  phone    String?
  email    String?

  facebook  String?
  instagram String?
  linkedin  String?

  userId String?
  owner  InstituteUser? @relation(fields: [userId], references: [id], onDelete: Cascade)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([state, district, city])
  @@index([userId])
}

// Student/Regular User for Authentication
model User {
  id        String   @id @default(cuid())
  name      String
  email     String   @unique
  phone     String
  password  String

  isVerified Boolean  @default(false)
  isActive   Boolean  @default(true)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([email])
}